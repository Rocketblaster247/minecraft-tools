var Gradient = [];

var lerp = function (a0, a1, w) {
  return (1 - w) * a0 + w * a1;
};

var dotGridGradient = function (ix, iy, x, y) {
  var dx = x - ix;
  var dy = y - iy;
  return (dx * Gradient[iy][ix][0] + dy * Gradient[iy][ix][1]);
};

var perlin = function (x, y) {
  var x0 = Math.floor(x);
  var x1 = Math.floor(x0 + 1);
  var y0 = Math.floor(y);
  var y1 = Math.floor(y0 + 1);
  
  var sx = x - x0;
  var sy = y - y0;
  
  var n0 = dotGridGradient(x0, y0, x, y),
      n1 = dotGridGradient(x1, y0, x, y),
      ix0 = lerp(n0, n1, sx);
      
  var n0 = dotGridGradient(x0, y1, x, y),
      n1 = dotGridGradient(x1, y1, x, y),
      ix1 = lerp(n0, n1, sx);
      
  return lerp(ix0, ix1, sy);
};
